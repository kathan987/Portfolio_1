/* ================================
   NAVIGATION - FINAL & FIXED
   ================================ */

.nav-shell {
  position: fixed; top: 0; left: 0; right: 0; width: 100%;
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  z-index: 1000; transition: background-color 0.3s ease, border-color 0.3s ease;
}
.nav-shell[data-mode="professional"] { background: rgba(10, 14, 19, 0.85); border-bottom: 1px solid rgba(0, 255, 136, 0.15); }
.nav-shell[data-mode="personal"] { background: rgba(255, 252, 245, 0.85); border-bottom: 1px solid rgba(255, 91, 0, 0.15); }

.nav-topline { position: absolute; top: 0; left: 0; right: 0; height: 1px; overflow: hidden; }
.nav-topline .data-packet { position: absolute; width: 80px; height: 1px; animation: packet-flow 4s linear infinite; }
@keyframes packet-flow { from { transform: translateX(-100%); } to { transform: translateX(calc(100vw + 100px)); } }
.nav-shell[data-mode="professional"] .data-packet { background: linear-gradient(90deg, transparent, #00ff88); }
.nav-shell[data-mode="personal"] .data-packet { background: linear-gradient(90deg, transparent, #FF5B00); }

.nav-inner {
  max-width: 1400px; margin: 0 auto; padding: 12px 40px;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center; gap: 20px;
}
.brand { justify-self: start; }
.fusion-toggle-wrapper { justify-self: center; }
.nav-actions { justify-self: end; }

.brand { display: flex; align-items: center; gap: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; }
.brand-dot { width: 8px; height: 8px; border-radius: 50%; animation: pulse-dot 2s ease-in-out infinite; }
.nav-shell[data-mode="professional"] .brand-dot { background: #00ff88; }
.nav-shell[data-mode="personal"] .brand-dot { background: #FF5B00; }
@keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
.brand-text { font-family: 'JetBrains Mono', monospace; letter-spacing: -0.5px; white-space: nowrap; }
.nav-shell[data-mode="professional"] .brand-text { color: #00ff88; }
.nav-shell[data-mode="personal"] .brand-text { color: #FF5B00; font-family: 'Playfair Display', serif; font-style: italic; }
.brand-status { font-size: 0.7rem; color: #64748b; margin-left: 8px; opacity: 0.7; }

.fusion-toggle { position: relative; display: inline-flex; border-radius: 50px; padding: 4px; }
.nav-shell[data-mode="professional"] .fusion-toggle { background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(0, 255, 136, 0.2); }
.nav-shell[data-mode="personal"] .fusion-toggle { background: rgba(255, 248, 240, 0.8); border: 1px solid rgba(255, 91, 0, 0.2); }
.toggle-slider { position: absolute; top: 4px; left: 4px; width: calc(50% - 2px); height: calc(100% - 8px); border-radius: 50px; transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.nav-shell[data-mode="professional"] .toggle-slider { background: linear-gradient(135deg, #00ff88, #00d4ff); }
.nav-shell[data-mode="personal"] .toggle-slider { background: linear-gradient(135deg, #FF5B00, #FF8F00); }
.toggle-option { position: relative; display: flex; align-items: center; gap: 8px; padding: 6px 20px; font-family: 'Inter', sans-serif; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: color 0.3s ease; white-space: nowrap; }
.nav-shell[data-mode="professional"] .toggle-option { color: #94a3b8; }
.nav-shell[data-mode="professional"] .toggle-option.active { color: #0a0e13; }
.nav-shell[data-mode="personal"] .toggle-option { color: #64748b; }
.nav-shell[data-mode="personal"] .toggle-option.active { color: #fff; }

.nav-actions { display: flex; align-items: center; gap: 12px; }
.icon-btn { position: relative; width: 38px; height: 38px; display: grid; place-items: center; border-radius: 50%; transition: all 0.3s ease; }
.nav-shell[data-mode="professional"] .icon-btn { border: 1px solid rgba(0, 255, 136, 0.2); color: #00ff88; }
.nav-shell[data-mode="personal"] .icon-btn { border: 1px solid rgba(255, 91, 0, 0.2); color: #FF5B00; }
.icon-btn:hover { transform: translateY(-2px) scale(1.1); }
.nav-shell[data-mode="professional"] .icon-btn:hover { background: rgba(0, 255, 136, 0.1); border-color: #00ff88; }
.nav-shell[data-mode="personal"] .icon-btn:hover { background: rgba(255, 91, 0, 0.1); border-color: #FF5B00; }
.icon-tooltip { display: none; }

/* --- Mobile Fixes --- */
@media (max-width: 968px) {
  .nav-inner { padding: 12px 20px; grid-template-columns: auto 1fr auto; }
  .brand-status { display: none; }
}

@media (max-width: 768px) {
  .toggle-label { display: none; } /* Hide text, keep icon */
  .toggle-option { padding: 8px 12px; }
  .brand-text { font-size: 1rem; }
}

@media (max-width: 480px) {
  .nav-inner { gap: 8px; }
  .brand-text { font-size: 0.9rem; } /* Shrink name slightly if needed */
  .icon-btn { width: 34px; height: 34px; }
  .icon-btn svg { width: 16px; height: 16px; }
}
/* ================================
   NAV LOADING BAR SUPPORT
   ================================ */

.nav-container {
  position: relative; /* Allows absolute positioning of loading bar */
}

/* Smooth color transitions for mode switching */
.nav-container {
  transition: 
    background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1),
    border-color 0.6s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.toggle-option,
.icon-btn,
.brand-text,
.brand-dot {
  transition: 
    background-color 0.4s ease,
    color 0.4s ease,
    border-color 0.4s ease;
}

/* Ensure loading bar doesn't interfere with nav content */
.nav-inner {
  position: relative;
  z-index: 10;
}

/* Loading bar styles (defined in App.css but scoped here) */
.nav-loading-bar {
  pointer-events: none; /* Don't interfere with clicks */
}